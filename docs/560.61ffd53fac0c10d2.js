"use strict";(self.webpackChunkmeeting_mate=self.webpackChunkmeeting_mate||[]).push([[560],{5560:(F,d,m)=>{m.r(d),m.d(d,{ApplicationModule:()=>y});var l=m(6814),_=m(72),e=m(4946),h=m(8487),r=m(95);function f(n,g){1&n&&e._UZ(0,"div",2)}function b(n,g){1&n&&(e.TgZ(0,"small",27),e._uU(1," **Rooms are not available on weekends. "),e.qZA())}function k(n,g){1&n&&(e.TgZ(0,"small",27),e._uU(1," **Gap between start and end time should be at least 30 minutes. "),e.qZA())}function Z(n,g){1&n&&(e.TgZ(0,"small",27),e._uU(1," **End time should be greater than start time. "),e.qZA())}function T(n,g){if(1&n&&(e.TgZ(0,"option"),e._uU(1),e.qZA()),2&n){const t=g.$implicit;e.xp6(1),e.Oqu(t)}}const v=function(n){return{disable:n}};function M(n,g){if(1&n){const t=e.EpF();e.TgZ(0,"div",3)(1,"div",4)(2,"div")(3,"h4"),e._uU(4,"Book Meeting"),e.qZA()()(),e.TgZ(5,"div",5)(6,"form",6)(7,"div",7)(8,"label",8),e._uU(9,"User Name"),e.qZA(),e._UZ(10,"input",9),e.qZA(),e.TgZ(11,"div",10)(12,"div",7)(13,"label",11),e._uU(14,"Meeting Date"),e.qZA(),e.TgZ(15,"input",12),e.NdJ("change",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.checkRoomAvailability())}),e.qZA()(),e.TgZ(16,"div",7)(17,"label",13),e._uU(18,"Start Time"),e.qZA(),e.TgZ(19,"input",14),e.NdJ("change",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.checkRoomAvailability())}),e.qZA()(),e.TgZ(20,"div",7)(21,"label",15),e._uU(22,"End Time"),e.qZA(),e.TgZ(23,"input",16),e.NdJ("change",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.checkRoomAvailability())}),e.qZA()()(),e.YNc(24,b,2,0,"small",17),e.YNc(25,k,2,0,"small",17),e.YNc(26,Z,2,0,"small",17),e.TgZ(27,"div",18)(28,"label",19),e._uU(29,"Meeting Room "),e.TgZ(30,"span",20),e._uU(31," (Available)"),e.qZA()(),e.TgZ(32,"select",21),e.YNc(33,T,2,1,"option",22),e.qZA()(),e.TgZ(34,"div",7)(35,"label",23),e._uU(36,"Agenda"),e.qZA(),e._UZ(37,"textarea",24),e.qZA()()(),e.TgZ(38,"button",25),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.bookMeeting())}),e._uU(39,"Book Meeting"),e.qZA(),e.TgZ(40,"button",26),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.close())}),e._uU(41,"Close"),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(6),e.Q6J("formGroup",t.bookingForm),e.xp6(9),e.Q6J("min",t.currentDate),e.xp6(9),e.Q6J("ngIf",t.bookingForm.get("bookingDate").hasError("weekend")&&t.bookingForm.get("bookingDate").dirty),e.xp6(1),e.Q6J("ngIf",t.bookingForm.get("startTime").hasError("gap")&&t.bookingForm.get("endTime").dirty),e.xp6(1),e.Q6J("ngIf",t.bookingForm.get("endTime").hasError("greater")&&t.bookingForm.get("endTime").dirty),e.xp6(7),e.Q6J("ngForOf",t.availableMeetingRoom),e.xp6(5),e.Q6J("ngClass",e.VKq(8,v,!t.bookingForm.valid))("disabled",!t.bookingForm.valid)}}let x=(()=>{class n{constructor(t,i,o){this.fb=t,this.commonService=i,this.datePipe=o,this.show=!1,this.closePopup=new e.vpe,this.refreshData=new e.vpe,this.meetingRoomData=[],this.availableMeetingRoom=[],this.currentDate=this.datePipe.transform(new Date,"yyyy-MM-dd")}ngOnInit(){}ngOnChanges(t){t.show.currentValue&&(this.bookingForm=this.fb.group({userName:[localStorage.getItem("username")],bookingDate:[null,[r.kI.required,this.validateWeekend]],startTime:[null,r.kI.required],endTime:[null,r.kI.required],meetingRoom:[null,r.kI.required],agenda:[null,r.kI.required]},{validators:[this.validateTimeRange("startTime","endTime")]}),this.availableMeetingRoom=[],this.meetingRoomData=this.commonService.MeetingRoomData)}validateTimeRange(t,i){return o=>{const a=o.controls[t],s=o.controls[i];if(a.value&&s.value){const c=new Date(`01/01/2000 ${a.value}`),p=new Date(`01/01/2000 ${s.value}`);(p.getTime()-c.getTime())/6e4<30?(s.setErrors({gap:!0}),a.setErrors({gap:!0})):(s.setErrors(null),a.setErrors(null)),s.setErrors(p<=c?{greater:!0}:null)}}}validateWeekend(t){const i=new Date(t.value);return 0===i.getDay()||6===i.getDay()?{weekend:!0}:null}close(){this.closePopup.emit()}bookMeeting(){const t={id:(new Date).getTime(),user_name:this.bookingForm.value.userName,booking_start:`${this.bookingForm.value.bookingDate} ${this.bookingForm.value.startTime}`,booking_end:`${this.bookingForm.value.bookingDate} ${this.bookingForm.value.endTime}`,agenda:this.bookingForm.value.agenda};this.saveData(this.bookingForm.value.meetingRoom,t)}saveData(t,i){const o=this.meetingRoomData.find(a=>a.room_name===t);o?o.booking_details.push(i):console.error(`Room with name ${t} not found.`),this.refreshData.emit(),this.close()}findAvailableMeetingRooms(t,i,o){return t.filter(s=>{for(const c of s.booking_details){const p=new Date(c.booking_start),u=new Date(c.booking_end);if(i>=p&&i<u||o>p&&o<=u||i<=p&&o>=u)return!1}return!0}).map(s=>s.room_name)}checkRoomAvailability(){this.availableMeetingRoom=[];let i=`${this.bookingForm.value.bookingDate} ${this.bookingForm.value.endTime}`;this.availableMeetingRoom=this.findAvailableMeetingRooms(this.meetingRoomData,new Date(`${this.bookingForm.value.bookingDate} ${this.bookingForm.value.startTime}`),new Date(i)),this.availableMeetingRoom.length&&this.bookingForm.get("meetingRoom").setValue(this.availableMeetingRoom[0])}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(r.qu),e.Y36(h.v),e.Y36(l.uU))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-booking-page"]],inputs:{show:"show"},outputs:{closePopup:"closePopup",refreshData:"refreshData"},features:[e.TTD],decls:2,vars:2,consts:[["class","overlay",4,"ngIf"],["class","root",4,"ngIf"],[1,"overlay"],[1,"root"],[1,"header-section"],[1,"form-section"],[3,"formGroup"],[1,"input-group"],["for","username",1,"required-field"],["readonly","","type","text","formControlName","userName","id","userName"],[1,"date-time-group"],["for","bookingDate",1,"required-field"],["type","date","formControlName","bookingDate","id","bookingDate",3,"min","change"],["for","startTime",1,"required-field"],["type","time","formControlName","startTime","id","startTime",3,"change"],["for","endTime",1,"required-field"],["type","time","formControlName","endTime","id","endTime",3,"change"],["class","error-message",4,"ngIf"],[1,"input-group",2,"margin-top","10px"],["for","meetingRoom",1,"required-field"],[1,"sub-text"],["formControlName","meetingRoom","id","meetingRoom"],[4,"ngFor","ngForOf"],["for","agenda",1,"required-field"],["formControlName","agenda","id","agenda"],["type","submit",1,"primary-btn","right",3,"ngClass","disabled","click"],[1,"secondary-btn","right","close-btn",3,"click"],[1,"error-message"]],template:function(i,o){1&i&&(e.YNc(0,f,1,0,"div",0),e.YNc(1,M,42,10,"div",1)),2&i&&(e.Q6J("ngIf",o.show),e.xp6(1),e.Q6J("ngIf",o.show))},dependencies:[l.mk,l.sg,l.O5,r._Y,r.YN,r.Kr,r.Fj,r.EJ,r.JJ,r.JL,r.sg,r.u],styles:[".overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;height:100vh;width:100vw;opacity:.5;background-color:#000;z-index:9999}.root[_ngcontent-%COMP%]{position:fixed;top:calc(50vh - 250px);left:calc(50vw - 300px);width:555px;background:white;border-radius:8px;z-index:1000000;padding:19px;transition:all .2s}.header-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%}.header-section[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{flex:1}h4[_ngcontent-%COMP%]{margin:0}.close-btn[_ngcontent-%COMP%]{margin-right:10px}.form-section[_ngcontent-%COMP%]{margin-top:30px}.input-group[_ngcontent-%COMP%]{margin-bottom:20px}.input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:5px}.input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .input-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:98%;padding:8px;border:1px solid #ccc;border-radius:3px}select[_ngcontent-%COMP%]{width:101%;padding:8px;border:1px solid #ccc;border-radius:3px}.date-time-group[_ngcontent-%COMP%]{display:flex;gap:20px;margin-bottom:-20px}.date-time-group[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{flex:1;margin-right:10px}.sub-text[_ngcontent-%COMP%]{font-size:x-small}"]})}return n})();function C(n,g){1&n&&(e.TgZ(0,"p",11),e._uU(1,"No Meeting Scheduled !"),e.qZA())}function D(n,g){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td",14),e.NdJ("click",function(){const a=e.CHM(t).$implicit,s=e.oxw(2);return e.KtG(s.deleteMeetingById(a.id))}),e._uU(14,"Delete"),e.qZA()()}if(2&n){const t=g.$implicit,i=g.index;e.xp6(2),e.Oqu(i+1),e.xp6(2),e.Oqu(t.user_name),e.xp6(2),e.Oqu(t.booking_date),e.xp6(2),e.AsE("",t.start_time," - ",t.end_time,""),e.xp6(2),e.Oqu(t.agenda),e.xp6(2),e.Oqu(t.room_name)}}function q(n,g){if(1&n&&(e.TgZ(0,"table")(1,"tr",12)(2,"th"),e._uU(3,"Sr No"),e.qZA(),e.TgZ(4,"th"),e._uU(5,"User Name"),e.qZA(),e.TgZ(6,"th"),e._uU(7,"Date"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"Time"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"Agenda"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"Room"),e.qZA(),e._UZ(14,"th"),e.qZA(),e.YNc(15,D,15,7,"tr",13),e.qZA()),2&n){const t=e.oxw();e.xp6(15),e.Q6J("ngForOf",t.currentUserMeetings)}}function A(n,g){if(1&n&&(e.TgZ(0,"option",15),e._uU(1),e.qZA()),2&n){const t=g.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t)}}function U(n,g){1&n&&(e.TgZ(0,"p",11),e._uU(1,"No Meeting Scheduled For Selected Room !"),e.qZA())}function R(n,g){if(1&n&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA()()),2&n){const t=g.$implicit,i=g.index;e.xp6(2),e.Oqu(i+1),e.xp6(2),e.Oqu(t.user_name),e.xp6(2),e.Oqu(t.booking_date),e.xp6(2),e.AsE("",t.start_time," - ",t.end_time,""),e.xp6(2),e.Oqu(t.agenda),e.xp6(2),e.Oqu(t.room_name)}}function P(n,g){if(1&n&&(e.TgZ(0,"table")(1,"tr",12)(2,"th"),e._uU(3,"Sr No"),e.qZA(),e.TgZ(4,"th"),e._uU(5,"User Name"),e.qZA(),e.TgZ(6,"th"),e._uU(7,"Date"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"Time"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"Agenda"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"Room"),e.qZA()(),e.YNc(14,R,13,7,"tr",13),e.qZA()),2&n){const t=e.oxw();e.xp6(14),e.Q6J("ngForOf",t.allMeetingRoomDetails)}}const O=[{path:"",component:(()=>{class n{constructor(t){this.commonSerive=t,this.openBookingPopup=!1,this.username=localStorage.getItem("username")||"",this.meetingRoomData=[],this.currentUserMeetings=[],this.allMeetingRoomList=[],this.selectedRoom="",this.allMeetingRoomDetails=[]}ngOnInit(){this.commonSerive.loginStatusCheck.next(!0),this.meetingRoomData=this.commonSerive.MeetingRoomData,this.allMeetingRoomList=this.getAllMeetingRoom(),this.selectedRoom=this.allMeetingRoomList[0],this.refreshData()}openBooking(){this.openBookingPopup=!0}popupClosed(){this.openBookingPopup=!1}refreshData(){let t=this.getUserRoomDetails(this.username);this.currentUserMeetings=this.transformDataToView(t),this.currentUserMeetings=this.filterUpcomingMeetings(this.currentUserMeetings),this.allMeetingRoomDetails=this.getBookingDetails(this.selectedRoom),this.allMeetingRoomDetails=this.filterUpcomingMeetings(this.allMeetingRoomDetails)}getUserRoomDetails(t){const i=[];return this.meetingRoomData.forEach(o=>{o.booking_details.forEach(a=>{a.user_name===t&&i.push({room_name:o.room_name,booking_details:a})})}),i}transformDataToView(t){return t.map(i=>{const o=i.booking_details,[a,s]=o.booking_start.split(" "),[,c]=o.booking_end.split(" ");return{id:o.id,user_name:o.user_name,booking_date:a,start_time:s,end_time:c,agenda:o.agenda,room_name:i.room_name}})}getAllMeetingRoom(){let t=[];return this.meetingRoomData.forEach(i=>{t.push(i.room_name)}),t}getRoomDetails(){this.allMeetingRoomDetails=this.getBookingDetails(this.selectedRoom),this.allMeetingRoomDetails=this.filterUpcomingMeetings(this.allMeetingRoomDetails)}getBookingDetails(t){const i=this.meetingRoomData.find(a=>a.room_name===t);return i?i.booking_details.map((a,s)=>({id:s+1,user_name:a.user_name,booking_date:a.booking_start.split(" ")[0],start_time:a.booking_start.split(" ")[1],end_time:a.booking_end.split(" ")[1],agenda:a.agenda,room_name:t})):[]}deleteMeetingById(t){for(const i of this.meetingRoomData){const o=i.booking_details.findIndex(a=>a.id===t);if(-1!==o)return i.booking_details.splice(o,1),void this.refreshData()}alert(`Meeting with ID ${t} not found.`)}filterUpcomingMeetings(t){const i=new Date;let o=[];return o=t.filter(a=>new Date(`${a.booking_date}T${a.start_time}`)>=i),o}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(h.v))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-home"]],decls:23,vars:8,consts:[[1,"home-page"],[1,"home-page_header"],[1,"home-page_btn-section"],[1,"primary-btn","btn-position",3,"click"],[1,"card","home-page_my-bookings"],[1,"home-page_data-division"],["class","text-center",4,"ngIf"],[4,"ngIf"],[3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[3,"show","closePopup","refreshData"],[1,"text-center"],[1,"fixed-header"],[4,"ngFor","ngForOf"],[1,"delete-btn",3,"click"],[3,"value"]],template:function(i,o){1&i&&(e.TgZ(0,"div",0)(1,"h1",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2)(4,"button",3),e.NdJ("click",function(){return o.openBooking()}),e._uU(5,"Book Meeting"),e.qZA()(),e.TgZ(6,"div",4)(7,"h4"),e._uU(8,"Your Upcoming Mettings"),e.qZA(),e._UZ(9,"hr"),e.TgZ(10,"div",5),e.YNc(11,C,2,0,"p",6),e.YNc(12,q,16,1,"table",7),e.qZA()(),e.TgZ(13,"div",4)(14,"h4"),e._uU(15,"Meeting Room Details"),e.qZA(),e._UZ(16,"hr"),e.TgZ(17,"select",8),e.NdJ("ngModelChange",function(s){return o.selectedRoom=s})("change",function(){return o.getRoomDetails()}),e.YNc(18,A,2,2,"option",9),e.qZA(),e.TgZ(19,"div",5),e.YNc(20,U,2,0,"p",6),e.YNc(21,P,15,1,"table",7),e.qZA()()(),e.TgZ(22,"app-booking-page",10),e.NdJ("closePopup",function(){return o.popupClosed()})("refreshData",function(){return o.refreshData()}),e.qZA()),2&i&&(e.xp6(2),e.hij("Welcome ",o.username," !"),e.xp6(9),e.Q6J("ngIf",!o.currentUserMeetings.length),e.xp6(1),e.Q6J("ngIf",o.currentUserMeetings.length),e.xp6(5),e.Q6J("ngModel",o.selectedRoom),e.xp6(1),e.Q6J("ngForOf",o.allMeetingRoomList),e.xp6(2),e.Q6J("ngIf",!o.allMeetingRoomDetails.length),e.xp6(1),e.Q6J("ngIf",o.allMeetingRoomDetails.length),e.xp6(1),e.Q6J("show",o.openBookingPopup))},dependencies:[l.sg,l.O5,r.YN,r.Kr,r.EJ,r.JJ,r.On,x],styles:[".home-page[_ngcontent-%COMP%]{padding:10px 70px}.home-page_header[_ngcontent-%COMP%]{text-align:center}.home-page_my-bookings[_ngcontent-%COMP%]{margin-top:10px}.home-page_data-division[_ngcontent-%COMP%]{height:calc(100vh - 620px);overflow:auto}h4[_ngcontent-%COMP%]{margin:0}table[_ngcontent-%COMP%]{border-collapse:collapse;width:100%}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:none;padding:8px;text-align:left}th[_ngcontent-%COMP%]{background-color:#f2f2f2;border-radius:4px}.fixed-header[_ngcontent-%COMP%]{position:sticky;top:0;background:white;z-index:1;padding-top:10px}select[_ngcontent-%COMP%]{width:20%;padding:8px;border:1px solid #ccc;border-radius:3px;margin-bottom:10px}.home-page_btn-section[_ngcontent-%COMP%]{display:flex;justify-content:end;align-items:center}.delete-btn[_ngcontent-%COMP%]{cursor:pointer;font-size:small;color:red}"]})}return n})()}];let w=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=e.oAB({type:n});static#o=this.\u0275inj=e.cJS({imports:[_.Bz.forChild(O),_.Bz]})}return n})(),y=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=e.oAB({type:n});static#o=this.\u0275inj=e.cJS({providers:[l.uU],imports:[l.ez,w,r.u5,r.UX]})}return n})()}}]);